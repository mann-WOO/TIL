# Authentication (인증)

> Session 기반 인증 vs Token 기반 인증

<br>

## Authentication

웹에서, 서버에 대한 일부 요청은 등록된 사용자, 혹은 특정 권한을 가진 사용자만이 이용할 수 있도록 설계됩니다. (정확히 하자면, 사용자 인증은 Authentication, 권한 부여는 Authroization이지만 두 가지 모두를 Authentication으로 통합하여 말합니다.)이 때 요청을 보낸 사용자의 권한을 확인하기 위한 과정이 필요합니다. 이를 위해 크게 두 가지 방법이 사용됩니다. 그 두 가지는**Session 기반 인증**과, **Token 기반 인증**입니다.

<br>

## **Session 기반 인증**

1. 로그인 시 로그인 정보를 서버의 데이터와 비교합니다. 통과 시 **서버의 세션 저장소에 사용자 정보를 저장**하고 세션 ID를 생성합니다.
2. 서버는 생선된 세션 ID를 클라이언트에 전달하고, 클라이언트는 세션 ID를 **브라우저의 쿠키에 저장**합니다.

- 쿠키는 만료 날짜를 가지고 있습니다.

3. 이후 인증이 필요한 요청에서 요청의 헤더에 세션 ID를 함께 보내면 서버에서는 해당 세션 ID 에 저장된 사용자 정보를 확인하여 요청을 처리합니다.

### 장점

- 정보가 세션측에 저장되고, 클라이언트 측의 세션 ID는 그 자체로는 개인 정보를 가지고 있지 않기 때문에 상대적으로 안전하다.

### 단점

- 서버의 메모리가 사용된다.

<br>

## **Token 기반 인증**

> Token 기반 인증 중 하나인  JWT(Json Web Token)의 작동 방식으로 설명

1. 로그인 시 로그인 정보를 서버의 데이터와 비교합니다. 통과 시 Token을 발행하여 클라이언트에 전달합니다. Token에는 암호화된 사용자 정보와 암호화 방식이 기록되어 있습니다.
   - 즉, Token에 기록된 정보는 복호화가 쉽기 때문에 중요한 개인정보는 기록하지 않습니다.
2. 클라이언트는 Token을 브라우저의 쿠키, 혹은 로컬 스토리지에 저장합니다. 이후 인증이 필요한 요청마다 요청의 헤더에 Token을 함께 보내면 서버는 토큰에 해당되는 사용자에 대해 요청을 처리합니다.

### 장점

- 서버의 메모리를 사용하지 않아도 된다.
- 멀티 디바이스 환경을 고려할 때, 토큰 방식은 서버측에서 토큰의 유효성만 확인하기 때문에 간편하다.

### 단점

- 토큰이 노출될 경우 쉽게 복호화가 가능해 중요한 정보는 기록할 수 없다.